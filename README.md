# 代码格式规范
# 目录
* [代码格式规范](#%E4%BB%A3%E7%A0%81%E6%A0%BC%E5%BC%8F%E8%A7%84%E8%8C%83)
* [目录](#%E7%9B%AE%E5%BD%95)
  * [什么是代码缩进？](#%E4%BB%80%E4%B9%88%E6%98%AF%E4%BB%A3%E7%A0%81%E7%BC%A9%E8%BF%9B)
  * [为什么要代码缩进？](#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BB%A3%E7%A0%81%E7%BC%A9%E8%BF%9B)
  * [如何正确按照规范缩进你的代码？](#%E5%A6%82%E4%BD%95%E6%AD%A3%E7%A1%AE%E6%8C%89%E7%85%A7%E8%A7%84%E8%8C%83%E7%BC%A9%E8%BF%9B%E4%BD%A0%E7%9A%84%E4%BB%A3%E7%A0%81)
    * [(一)Tab键是缩进代码的工具](#%E4%B8%80tab%E9%94%AE%E6%98%AF%E7%BC%A9%E8%BF%9B%E4%BB%A3%E7%A0%81%E7%9A%84%E5%B7%A5%E5%85%B7)
    * [(二)在何时需要缩进？](#%E4%BA%8C%E5%9C%A8%E4%BD%95%E6%97%B6%E9%9C%80%E8%A6%81%E7%BC%A9%E8%BF%9B)
    * [(三)花括号应该放在哪？](#%E4%B8%89%E8%8A%B1%E6%8B%AC%E5%8F%B7%E5%BA%94%E8%AF%A5%E6%94%BE%E5%9C%A8%E5%93%AA)
    * [(四)空格 &amp; 换行](#%E5%9B%9B%E7%A9%BA%E6%A0%BC--%E6%8D%A2%E8%A1%8C)
      * [1\. 空格](#1-%E7%A9%BA%E6%A0%BC)
      * [2\. 换行](#2-%E6%8D%A2%E8%A1%8C)
  * [Ex\. 巧用自动缩进避免写Bug](#ex-%E5%B7%A7%E7%94%A8%E8%87%AA%E5%8A%A8%E7%BC%A9%E8%BF%9B%E9%81%BF%E5%85%8D%E5%86%99bug)
    * [情况一：相比预期缩进多了一个Tab](#%E6%83%85%E5%86%B5%E4%B8%80%E7%9B%B8%E6%AF%94%E9%A2%84%E6%9C%9F%E7%BC%A9%E8%BF%9B%E5%A4%9A%E4%BA%86%E4%B8%80%E4%B8%AAtab)
    * [情况二：相比预期少了一个Tab](#%E6%83%85%E5%86%B5%E4%BA%8C%E7%9B%B8%E6%AF%94%E9%A2%84%E6%9C%9F%E5%B0%91%E4%BA%86%E4%B8%80%E4%B8%AAtab)
  * [结束](#%E7%BB%93%E6%9D%9F)
* [参考 &amp; 感谢名单](#%E5%8F%82%E8%80%83--%E6%84%9F%E8%B0%A2%E5%90%8D%E5%8D%95)
## 什么是代码缩进？
　　代码缩进指的是我们在编写编程语言的过程中，在一些特定行的代码左端空出一部分长度，使得更加清晰地从外观上看出程序的逻辑结构，使得代码更加易于阅读。
```C++
#include <stdio.h>
int main()
{
    printf("Hello World!");
}
```
　如上代码，在`printf`前面四个空格便是代码缩进
## 为什么要代码缩进？
　　可能大家在编写简单程序的时候不太能理解缩进的意义。但是当代码繁杂起来的时候一个正确的缩进就显得尤为重要了。一个正确规范的缩进不仅能使别人更容易读懂你的代码，更重要的是能使你**少写很多bug**！</br>
  
　　事实上，绝大多数的IDE在你编写代码的时候都会进行自动缩进。但即使有自动缩进的功能存在，我们也依旧需要了解正确规范的缩进格式，因为自动缩进仅在编写新代码时生效，在debug的过程中很多时候是不会再次帮你缩进的。</br>
  
　　废话不多说，上对比
```C++
#include <stdio.h>
//缩进示例
int main()
{
    /* 局部变量定义 */
    int i, j;
    for (i = 2; i < 100; i++) 
    {
        for (j = 2; j <= (i / j); j++)
        {
            if (!(i % j)) break; // 如果找到，则不是质数
        }
        if (j > (i / j))
        {
            printf("%d 是质数\n", i);
        }
    }
    return 0;
}
```
```C++
#include <stdio.h>
//不缩进示例
int main()
{
/* 局部变量定义 */
int i, j;
for (i = 2; i < 100; i++) 
{
for (j = 2; j <= (i / j); j++)
{
if (!(i % j)) break; // 如果找到，则不是质数
}
if (j > (i / j))
{
printf("%d 是质数\n", i);
}
}
return 0;
}
```
```C++
#include <stdio.h>
//未按规范缩进
int main()
{
    /* 局部变量定义 */
    int i, j;
    for (i = 2; i < 100; i++) 
    {
        for (j = 2; j <= (i / j); j++)
        {
        if (!(i % j)) break; // 如果找到，则不是质数
        }
        if (j > (i / j))
        {
        printf("%d 是质数\n", i);
        }
    }
    return 0;
}
```
```C++
#include <stdio.h>/*无换行*/int main(){/* 局部变量定义 */int i, j;for (i = 2; i < 100; i++) {for (j = 2; j <= (i / j); j++){if (!(i % j)) break; /* 如果找到，则不是质数*/}if (j > (i / j)){printf("%d 是质数\n", i);}}return 0;}
```
　　看看上面几个案例，如果使用了多重嵌套的语句，不缩进或者未按照规范缩进你能快速辨认哪个语句在哪一个花括号内吗？至于没换行的那个……两分钟内能看得懂的建议直接入职华为。</br>
  
　　觉得都没区别的出门左转。觉得区别大了去了那么你可以继续往下学习缩进了！
`话是这么说，要是哪天你从事了程序员工作，写出了不规范格式的代码，那么你极有可能被接手你代码准备阅读的同事打死~`
## 如何正确按照规范缩进你的代码？
### (一)Tab键是缩进代码的工具
　　很多比较细心的编程初学者在学习编程的时候可能会注意到代码缩进的问题，在一些没有自动缩进的地方会邯郸学步一般使用空格进行缩进。但是由于不知道缩进的具体格式方法，导致写出来的代码参差不齐
```C++
#include <stdio.h>
int main()
{
    int a;
   float b;
    printf("Hello World!");
   return 0;
}
```
　　这样的代码也能运行，但是其实并不美观。事实上，目前我见过缩进的单元字符数多数为4个字符，其中也有8个或者2个甚至3个字符缩进的存在（但是我并不喜欢，所以这篇文章都是以4字符为准）。
用空格固然可以对代码进行缩进，但是使用Tab键缩进更为高效。

**优点如下**</br>
1. 首先，Tab键按一下当你空格按四下</br>
2. Tab可以对多行进行操作。举个例子，当你想要缩进一整个代码块时，你可以全选整个代码块，按下Tab即可对整块进行缩进，而不用一行一行地敲打空格</br>
3. 以上两点还不够你使用Tab？</br>
综上，我建议大家使用Tab进行代码缩进。

`附1：使用Shift+Tab可以撤销缩进，同样可以同时多行操作`</br>
`附2：使用Tab键虽然方便，但也会导致一些不可预料的问题（在Python中，此问题尤为严重），因此建议将Tab设置为“使用Tab替代四个空格”，具体设置方法不在此展开讲，详细方法自己百度`
`附3：如果硬要使用空格进行缩进也行，我没法强迫你。但是记住，千万不要在一个程序里混用Tab和空格，不然debug有你好受的`
### (二)在何时需要缩进？
**(1) 新建函数时，函数对应花括号中间所有代码往前缩进四个字符**</br>
　我们用一个最简单的程序进行演示：
```C++
int main()
{
    int a;                      //花括号中间的所有代码往前
    int b;                      //缩进一个Tab（四个字符），
    printf("Helloworld!");      //上下花括号对齐前方int。
}
```
　同理，当一个程序有多个函数，每个函数也应该如上处理：
```C++
#include <stdio.h>
int main()
{
    void print();
    int a;
    int b;
    print();
}

void print()
{
    printf("Helloworld!");
}
```

**(2) 在遇到if，else，for，do，while等语句时，花括号中间所有代码再往前缩进一个Tab**
```C++
//简单while语句
#include <stdio.h>
int main()
{
    int i = 1;
    int sum = 0;
    while (i <= 100)
    {
        sum = sum + i;      //此处相对其他语句往前再缩进一个
        i++;                //Tab的距离，花括号对准while
    }
}
```
　当多种语句嵌套时，处理方法同上：
```C++
#include <stdio.h>
int main()
{
    int n;
    for (n = 100; n <= 200; n++)
    {
        if (n % 3 == 0)
        {
            continue;       //再相对if往前缩进一个Tab
        }
        printf("%d",n);
    }
    printf("\n");
    return 0;
}
```

**※特殊情况：使用switch……case时，case相对switch不缩进！**</br>
　这个特殊情况可不是我说特殊他就是特殊的，这是微软老大哥说的。</br>
　`https://msdn.microsoft.com/zh-cn/library/k0t5wee3.aspx`
```C++
#include <stdio.h>
int main()
{
    char grade;
    scanf ("%c",&grade);
    switch (grade)
    {
    case 'A':                   //case向上对齐switch，不缩进
        printf ("85-100");
        break;
    case 'B':
        printf ("70-84");       //此处代码块如(2)，相对case
        break;                  //向右缩进一个Tab。
    case 'C':
        printf ("60-70");
        break;
    }
}
```

### (三)花括号应该放在哪？
　　关于花括号的放置位置，其实有两种风格的写法，一种主张左括号连在函数后不换行`K&R风格`，另外一种便是换行党派，也就是我上面写的那样`微软风格`。不管那种风格（党派）其实都没有对错之分，见仁见智。但是！一定不要写成下面`错误示范`这样！
```C++
//K&R风格                                //微软风格
#include <stdio.h>                       #include <stdio.h>
int main(){                              int main()
    int i = 1;                           {
    int sum = 0;                             int i = 1; 
    while (i <= 100){                        int sum = 0; 
        sum = sum + i;                       while (i <= 100)
        i++;                                 {
    }                                            sum = sum + i;
}                                                i++；
                                             }
                                         }
```
```C++
//错误示范
#include <stdio.h>
int main()
  { int i = 1;
    int sum = 0;
    while (i <= 100)
      { sum = sum + i;
        i++;
    }
}
```
　　如上错误示范的写法是错误的缩进方法，但是似乎有很大数目的人都使用这种方法对代码缩进，其中也包括了谭浩强的《C程序设计》。我不清楚这种写法究竟是旧的缩进标准还是因为什么因缘被传开的`（如果有老哥知道的或者是我讲的不对的欢迎在issue里面告诉我！）`，总之，我非常不推荐你们使用这种方法缩进你们的花括号。

 · | K&R风格 | 微软风格|
---|---------|--------|
**优点**|代码看起来更加紧凑|对齐的花括号使程序块更易于辨认|
**缺点**|程序块比较难以分辨|占用行数较多|

　当然，如果是使用Microsoft Visual系列进行编程的初学者，推荐使用微软风格的花括号书写风格。

**★关于单语句if，else，do，while，for，也应该在语句上下加花括号</br>**
```C++
if (x > 10)
{
    printf("True");   //if下语句只有一行，虽然语法上可以省略，但是也要加上花括号，以防止不必要的错误
}
```
### (四)空格 & 换行
#### 1. 空格
**(1) 逗号，冒号，非结尾分号结尾加上空格**
```C++
for (int i = 1; i < 10; i++)        //非结尾分号后加空格
{
    printf ("%d, %c", i, cha);     //逗号后加空格，结尾分号可以不加空格
}
```

**(2) 大部分双目运算符（如 + - * / = == <= > && ||)应在两边加空格**
```C++
if (a == 1 && a + b >= 10)    //运算符左右加空格，同一个运算符不可空格拆开（错误：b > = 10)
{
    printf ("True");
}
else
{
    printf("False");
}
```
`注：'!'符号右端不加空格，如!(x >= 5 || y ==1)`

**(3)某些情况下，为了助于理解，可省略部分空格，但不能造成优先级阅读歧义**</br>
　比如上面那段代码，为了便于理解，增强可读性，我们可以这样写：</br>
```C++
if (a == 1 && a+b >= 10)    //正确省略方法：省略a + b之间的空格
//if (a == 1 && a + b>=10)    错误省略方法：省略b >= 10之间的空格，会造成阅读歧义！
{
    printf ("True");
}
else
{
    printf("False");
}
```

**(4)函数名后建议加上空格</br>**
　`printf("Helloworld!");`</br>
　`printf ("Helloworld!");`</br>
　以上，自己对比看看吧，写的时候尽量加上。
 
#### 2. 换行
**(1) 必须一个语句跟随一个换行**
```C++
switch (str)
{
case 'A': printf ("85-100");break;   //错误示范
case 'B':
    printf ("70-84");
    break;                           //正确示范
}
if (i < 10) printf ("True");         //错误示范
else
    printf ("False");                //正确示范
```
　**※ 重点：似乎很多人会在case语句的冒号后面直接写语句，事实上这种写法是错误的。正确的写法**`如上，已有示例`**是case语句独占一行，然后换行缩进写下一句。**
 
**(2) 太长的语句要换行并对齐**</br>
　以下以判断非闰年`(year%4 != 0) || (year%100 == 0 && year%400 != 0)`为例：
```C++
if ((year%4 != 0) || (year%100 == 0 && year%400 != 0))    //长语句

if ((year%4 != 0) ||       //换行为多句短句   
    (year%100 == 0 &&      //换行后注意缩进
     year%400 != 0))       //使排版整洁可读
```
## Ex. 巧用自动缩进避免写Bug
　就如上面所说的，当我们在编写代码时，大部分的IDE都会提供自动缩进功能为你规整代码。但是这个自动缩进也不是很智能，它只是按照一些特定的符号判断接下来的语句应该如何缩进。事实上，我们可以反过来运用它的死板来避免我们写Bug！

### 情况一：相比预期缩进多了一个Tab
　这种情况多发生在结尾分号忘记加的情况。因为上一句未加上分号，计算机以为你的语句仍未结束，因此在回车时会为你多加一个Tab为接下来的新程序块做准备`比如if语句后面并无分号，回车时IDE会为你加上一个Tab
```C++
int a
    return 0;    //上一行无分号，自动缩进会为下一行多缩进一个Tab
```

### 情况二：相比预期少了一个Tab
　这种情况一般时在int main()，if (n > m)等类似无需分号的语句多加了分号，导致IDE误认为该语句已经结束。这种情况比上一种情况致命多了，毕竟上面少加分号编译会出错，这种情况一般编译不会出错，甚至还能运行，就是跑起来全是bug（汗）
```C++
if (a > 10);
printf ("True");    //上一行if语句多写了分号，自动缩进会将下一行语句对齐上一句，导致少了一个Tab，这种情况一般不会报错。
```
## 结束
　感谢大家能看到这里，如果上面我有说错的地方请务必在issue中指出，有问题也欢迎在issue中一起讨论！
# 参考 & 感谢名单
花括号&换行规范：https://blog.csdn.net/Dr_Haven/article/details/81868857

switch语句的微软官方说明：https://msdn.microsoft.com/zh-cn/library/k0t5wee3.aspx

符号空格规范：https://www.jianshu.com/p/eac87803cc2e

Tab或空格缩进问题：https://www.zhihu.com/question/19960028
